module.exports=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=11)}([function(a,b,c){a.exports=!c(9)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(a){var b=a.exports={version:'2.5.7'};'number'==typeof __e&&(__e=b)},function(a){a.exports=function(a){return'object'==typeof a?null!==a:'function'==typeof a}},function(a){a.exports=require('electron')},function(a,b,c){a.exports={default:c(13),__esModule:!0}},function(a,b){'use strict';b.__esModule=!0,b.default=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}},function(a,b,c){'use strict';b.__esModule=!0;var d=c(14),e=function(a){return a&&a.__esModule?a:{default:a}}(d);b.default=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),(0,e.default)(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()},function(a){var b=a.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=b)},function(a,b,c){var d=c(21),e=c(22),f=c(24),g=Object.defineProperty;b.f=c(0)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if('get'in c||'set'in c)throw TypeError('Accessors not supported!');return'value'in c&&(a[b]=c.value),a}},function(a){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a){a.exports=require('bluebird')},function(a,b,c){'use strict';function d(){h='win32'===process.platform?new e.BrowserWindow({height:432,useContentSize:!0,width:768,frame:!1,titleBarStyle:'none',minWidth:427,minHeight:240,webPreferences:{webSecurity:!1,experimentalFeatures:!0},backgroundColor:'#802e2c29',show:!1}):new e.BrowserWindow({height:432,useContentSize:!0,width:768,frame:!1,titleBarStyle:'none',minWidth:427,minHeight:240,transparent:!0,webPreferences:{webSecurity:!1,experimentalFeatures:!0},backgroundColor:'#802e2c29',show:!1}),h.loadURL(j),h.on('closed',function(){h=null}),h.once('ready-to-show',function(){h.show()})}Object.defineProperty(b,'__esModule',{value:!0});var e=c(3),f=c.n(e),g=c(12);global.__static=c(32).join(__dirname,'/static').replace(/\\/g,'\\\\');var h=void 0,i=void 0,j='file://'+__dirname+'/index.html';e.app.on('ready',function(){e.app.setName('SPlayerX'),d(),console.log(),i=g.a.getInstance(h,e.app),i.onStart().then(function(a){console.log(a)})}),e.app.on('window-all-closed',function(){'darwin'!==process.platform&&e.app.quit()}),e.app.on('activate',function(){null===h&&(d(),i.Window=h)})},function(a,b,c){'use strict';function d(){s.autoDownload=!0,s.autoInstallOnAppQuit=!0,s.allowDowngrade=!1}c.d(b,'a',function(){return u});var e=c(4),f=c.n(e),g=c(5),h=c.n(g),i=c(6),j=c.n(i),k=c(27),l=c(3),m=c.n(l);console.log(k.a);var n=c(10),o=c(29),p=o.CancellationToken,q=c(30),r=c(31),s=r.autoUpdater,t=void 0,u=function(){var a=null,b=function(){function a(b,c){return h()(this,a),t=this,this.updateStrategyHelper=new k.a('autoUpdatString_random_olapxsdf#@%'),this.alreadyInUpdate=!1,this.menuallyStarted=!1,this.cancellationToken=new p,this.hasUpdate=null,s?void(this.win=b,this.app=c):null}return j()(a,[{key:'onStart',value:function(){var a=this;return new n(function(b){d(),a.updateStrategyHelper.getStrategyStorage().then(function(){a.updateStrategyHelper.AutoCheck?b(a.startUpdateCheck()):b()})})}},{key:'onClose',value:function(){return this.close=!0,this.updateStrategyHelper.storeToLocal()}},{key:'startUpdateManually',value:function(){var a=this,b=this;return new n(function(c){b.menuallyStarted=!0,c(a.startUpdateCheck())})}},{key:'cancelUpdate',value:function(){return s.downloadUpdate(this.cancellationToken)}},{key:'startUpdateCheck',value:function(){var a=this;return new n(function(b,c){a.alreadyInUpdate&&c(new Error('already in use')),a.alreadyInUpdate=!0,s.logger=q,s.logger.transports.file.level='info',q.info('update checking started'),a.registerMessageHandlerForUpdater(),a.registerMessageHandlerForIPCMain(),b(s.checkForUpdates())})}},{key:'sendStatusToWindow',value:function(a){if(this.win)try{this.win.webContents.send('update-message',a)}catch(a){}}},{key:'registerMessageHandlerForUpdater',value:function(){var a=this;s.on('checking-for-update',function(){a.sendStatusToWindow('Checking for update...')}),s.on('update-available',function(b){q.info('update available '+f()(b)),t.isUpdateProper(b)?(t.hasUpdate=!0,a.sendStatusToWindow(f()(b)+'Update available.')):t.hasUpdate=!1}),s.on('update-not-available',function(a){q.info('update not available '+f()(a)),t.hasUpdate=!1,t.alreadyInUpdate=!1,t.menuallyStarted&&t.sendStatusToWindow('update-not-available')}),s.on('error',function(a){q.info('update available '+a.stack),t.alreadyInUpdate=!1,t.sendStatusToWindow('error-in-auto-updater#'+a)}),s.on('download-progress',function(a){var b='download-progress#download-speed:'+a.bytesPerSecond;b=b+'&download-percentage:'+a.percent+'%',b=b+'&download-total:'+a.total,t.sendStatusToWindow(b)}),s.on('update-downloaded',function(){q.info('update downloaded'),t.updateStrategyHelper.AskQuitInstall?l.dialog.showMessageBox({type:'question',buttons:['Yes','No'],title:'restart app now',message:'Unsaved data will be lost. Are you sure you want to quit?'},function(a){0===a&&(t.app.showExitPrompt=!1,s.quitAndInstall(!0,!0))}):s.quitAndInstall(!0,!0)})}},{key:'setStrategy',value:function(a){a&&(a.autoCheck&&(this.updateStrategyHelper.AutoCheck=a.autoCheck),a.askDownload&&(this.updateStrategyHelper.AskDownload=a.askDownload),a.askQuitInstall&&(this.updateStrategyHelper.AskQuitInstall=a.askQuitInstall))}},{key:'registerMessageHandlerForIPCMain',value:function(){var a=this;l.ipcMain.on('cancel-update',function(a,b){console.log(b),t.cancelUpdate()}),l.ipcMain.on('update-setting',function(b,c){a.setStrategy(c)}),l.ipcMain.on('update-manually',function(b,c){console.log(c),a.startUpdateManually().then(function(a){'already in use'===a.toString()?t.sendStatusToWindow('update-manually#already-in-use'):t.sendStatusToWindow('update-manually#other-error')})})}},{key:'isUpdateProper',value:function(a){return a.toString(),!0}},{key:'Window',set:function(a){this.win=a},get:function(){return this.win}}]),a}();return{getInstance:function(c,d){return a?(c&&d&&(a.app=d,a.win=c),a):(a=new b(c,d),a)}}}()},function(a,b,c){var d=c(1),e=d.JSON||(d.JSON={stringify:JSON.stringify});a.exports=function(){return e.stringify.apply(e,arguments)}},function(a,b,c){a.exports={default:c(15),__esModule:!0}},function(a,b,c){c(16);var d=c(1).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){var d=c(17);d(d.S+d.F*!c(0),'Object',{defineProperty:c(8).f})},function(a,b,c){var d=c(7),e=c(1),f=c(18),g=c(20),h=c(26),i='prototype',j=function(a,b,c){var k,l,m,n=a&j.F,o=a&j.G,p=a&j.S,q=a&j.P,r=a&j.B,s=a&j.W,t=o?e:e[b]||(e[b]={}),u=t[i],v=o?d:p?d[b]:(d[b]||{})[i];for(k in o&&(c=b),c)l=!n&&v&&void 0!==v[k],l&&h(t,k)||(m=l?v[k]:c[k],t[k]=o&&'function'!=typeof v[k]?c[k]:r&&l?f(m,d):s&&v[k]==m?function(d){var a=function(e,a,b){if(this instanceof d){switch(arguments.length){case 0:return new d;case 1:return new d(e);case 2:return new d(e,a);}return new d(e,a,b)}return d.apply(this,arguments)};return a[i]=d[i],a}(m):q&&'function'==typeof m?f(Function.call,m):m,q&&((t.virtual||(t.virtual={}))[k]=m,a&j.R&&u&&!u[k]&&g(u,k,m)))};j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,a.exports=j},function(a,b,c){var d=c(19);a.exports=function(e,f,a){return(d(e),void 0===f)?e:1===a?function(b){return e.call(f,b)}:2===a?function(c,a){return e.call(f,c,a)}:3===a?function(d,a,b){return e.call(f,d,a,b)}:function(){return e.apply(f,arguments)}}},function(a){a.exports=function(a){if('function'!=typeof a)throw TypeError(a+' is not a function!');return a}},function(a,b,c){var d=c(8),e=c(25);a.exports=c(0)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(2);a.exports=function(a){if(!d(a))throw TypeError(a+' is not an object!');return a}},function(a,b,c){a.exports=!c(0)&&!c(9)(function(){return 7!=Object.defineProperty(c(23)('div'),'a',{get:function(){return 7}}).a})},function(a,b,c){var d=c(2),e=c(7).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){var d=c(2);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&'function'==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if('function'==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&'function'==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError('Can\'t convert object to primitive value')}},function(a){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a){var b={}.hasOwnProperty;a.exports=function(a,c){return b.call(a,c)}},function(a,b,c){'use strict';function d(a){return'undefined'!=typeof a}var e=c(4),f=c.n(e),g=c(5),h=c.n(g),i=c(6),j=c.n(i),k=c(10),l=c(28);k.promisifyAll(l);var m={autoCheck:!0,askDownload:!1,askQuitInstall:!0},n=function(){function a(b){h()(this,a),this.uss=b,this.updateStrategy=null}return j()(a,[{key:'getStrategyStorage',value:function(){var b=this,c=this;return new k(function(e,f){l.get(b.uss,function(g,h){if(g){var i='Download speed: '+b.uss;console.log(i),f(g)}else d(h)||null==h?(c.updateStrategy=m,e()):(c.updateStrategy=a.getStrategyFromString(h),e())})})}},{key:'storeToLocal',value:function(){return l.setAsync(this.uss,f()(this.updateStrategy))}},{key:'AutoCheck',get:function(){return this.updateStrategy.autoCheck},set:function(a){this.updateStrategy.autoCheck=a}},{key:'AskDownload',get:function(){return this.updateStrategy.askDownload},set:function(a){this.updateStrategy.askDownload=a}},{key:'AskQuitInstall',get:function(){return this.updateStrategy.askQuitInstall},set:function(a){this.updateStrategy.askQuitInstall=a}}],[{key:'getStrategyFromString',value:function(a){return JSON.parse(a)}}]),a}();b.a=n},function(a){a.exports=require('electron-json-storage')},function(a){a.exports=require('electron-builder-http')},function(a){a.exports=require('electron-log')},function(a){a.exports=require('electron-updater')},function(a){a.exports=require('path')}]);